!function(){async function e(e){let t=await chrome.runtime.sendMessage({action:"ezrevenue_customer_info",...e||{}});if(console.log("getCustomerInfo response",t),t&&t.success)return t.data;{let e=t?.error||"获取会员信息失败";throw console.info("Error:",e),Error(e)}}async function t(t){let n=t.home_link.url;if(!n)return;let o=(await chrome.windows.create({url:n,type:"popup",width:800,height:600,left:Math.round((screen.width-800)/2),top:Math.round((screen.height-600)/2)})).id;return console.log(`Window created with ID: ${o}`),await new Promise(t=>{let n=async r=>{r===o&&(chrome.windows.onRemoved.removeListener(n),t(await e({refresh:!0})))};chrome.windows.onRemoved.addListener(n)})}window.createEzrevenueService=function(){let n={getCustomerInfo:async()=>await e(),async showPaywallPopup(){let e=await n.getCustomerInfo();await t(e)},async isBalanceUsable({equityId:e,equityAlias:t}={}){let o=(await n.getCustomerInfo()).balance_s.find(n=>e?n.equity.id===e:n.equity.alias===t||"equity_vip");return o?.is_balance_usable}};return n}}();
//# sourceMappingURL=ui.js.map
